# Bolshoi Golang Project

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

**Bolshoi Golang** ‚Äî —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è in-memory Redis –∫—ç—à–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ —è–∑—ã–∫–µ Go. –ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫, —Å–ø–∏—Å–∫–æ–≤ –∏ —Å–ª–æ–≤–∞—Ä–µ–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ (TTL) –¥–ª—è –∫–ª—é—á–µ–π. 

### üõ†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫, —Å–ø–∏—Å–∫–æ–≤ –∏ —Å–ª–æ–≤–∞—Ä–µ–π
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ TTL –Ω–∞ –ª—é–±–æ–π –∫–ª—é—á
- –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ telnet –ø—Ä–∏ –ø–æ–º–æ—â–∏ REST API
- –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `docker-compose up`
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏ (—Ñ–∞–π–ª `coverage.out`)

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å:
- **git**
- **docker**
- **docker-compose**

### –®–∞–≥–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/antonvlasov/geo
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Å–∫–∞—á–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

cd geo
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

docker-compose up
###üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –ø–æ telnet –∫ –ø–æ—Ä—Ç—É 7089:

telnet localhost 7089
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü—Ä–∏–º–µ—Ä:

SET name Anton EX 60

###üìú –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥

KEYS pattern

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏—Ö glob-style –æ–±—Ä–∞–∑—Ü—É.

SET name Anton
OK
SET age 20
OK
KEYS *
1) "name"
2) "age"
GET key

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É key. –ï—Å–ª–∏ –ø–æ –∫–ª—é—á—É –Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è nil.

SET name Anton
OK
GET name
Anton
GET PUE
(nil)
SET key value [EX seconds]

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É key —Ä–∞–≤–Ω—ã–º —Å—Ç—Ä–æ–∫–µ value.

SET key1 value1 EX 20
OK
EXPIRE key seconds

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–ª—é—á—É.

SET key1 1     
OK
EXPIRE key3 30
(integer) 0
EXPIRE key1 20
(integer) 1
...after some time
GET key1
(nil)
HSET key field value [field value ...]

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–ª–µ —Å–ª–æ–≤–∞—Ä—è field —Ä–∞–≤–Ω—ã–º value.

HSET key1 hash1 val1 hash2 val2
(integer) 2
HGET key field

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è field —Å–ª–æ–≤–∞—Ä—è –ø–æ –∫–ª—é—á—É key.

HGET key1 hash1
val1
LPUSH key element [element ...]

–í—Å—Ç–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ª–µ–≤–∞ –≤ —Å–ø–∏—Å–æ–∫ –ø–æ –∫–ª—é—á—É key.

LPUSH list1 1 2 3
(integer) 3
RPUSH key element [element ...]

–í—Å—Ç–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø—Ä–∞–≤–∞ –≤ —Å–ø–∏—Å–æ–∫ –ø–æ –∫–ª—é—á—É key.

RPUSH list1 1 2 3
(integer) 3
LPOP key [count]

–£–¥–∞–ª—è–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç —Å–ª–µ–≤–∞ –∏–∑ —Å–ø–∏—Å–∫–∞.

LPOP list1 2
1) 1
2) 2
RPOP key [count]

–£–¥–∞–ª—è–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç —Å–ø—Ä–∞–≤–∞ –∏–∑ —Å–ø–∏—Å–∫–∞.

RPOP list1 2
1) 10
2) 9
LSET key index element

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º index —Å–ø–∏—Å–∫–∞ –ø–æ –∫–ª—é—á—É key —Ä–∞–≤–Ω—ã–º element.

LSET list1 3 30
OK
LGET key index

–ü–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º index –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ –∫–ª—é—á—É key.

LGET list1 3
30
üñ•Ô∏è –ö–ª–∏–µ–Ω—Ç

–í—Å–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≤–∏–¥–µ —Ñ—É–Ω–∫—Ü–∏–π —Å –ø–æ–¥–ø–∏—Å—å—é:

func(conn net.Conn, args []string) error {}
–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

clientConn, err := net.DialTimeout("tcp", "localhost:7089", 0)
if err != nil {
    t.Error(err)
}

err = Set(clientConn, []string{"name", "Anton"})
if err != nil {
    t.Error(err)
}
reader := bufio.NewReader(clientConn)
bytes, err := reader.ReadBytes('\n')
fmt.Println(string(bytes))
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

SAVE savename
–≥–¥–µ savename ‚Äî –∏–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

LOAD savename
–¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.

üß™ –¢–µ—Å—Ç—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –±–æ–ª–µ–µ 70% –∫–æ–¥–∞ –∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è.

–û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏:

BenchmarkSet             1000000               173 ns/op
–û–ø–µ—Ä–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è:

BenchmarkGet             1000000                56.4 ns/op
–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ —á—Ç–µ–Ω–∏–µ:

BenchmarkGetConcurrent            10000000               289 ns/op
üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –≤—ã –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π –ø–æ –∞–¥—Ä–µ—Å—É: [–≤–∞—à email].
